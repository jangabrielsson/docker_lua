# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY. Edit /Dockerfile.erb and run /update instead.

FROM alpine

RUN apk add --no-cache \
      ca-certificates \
      wget \
      curl \
      gcc \
      libc-dev \
      make \
      libressl-dev \
      git \
      coreutils \
      gnupg \
      unzip \
      moreutils \
      linux-headers \
      luajit-dev \
      lua5.1-dev \
      lua-turbo \
#      luarocks \
  && rm -rf /tmp/lua /tmp/lua.tar.gz \
  && wget https://luarocks.org/releases/luarocks-3.8.0.tar.gz \
  && mkdir /usr/local/include \
  && tar zxpf luarocks-3.8.0.tar.gz \
  && cd luarocks-3.8.0  \
  && ./configure --with-lua-include=/usr/include \
  && make \
  && make install \
    && rm -rf /tmp/luarocks /tmp/luarocks.tar.gz \
    && luarocks --version \
    && luarocks install turbo \
    && luarocks install luasocket \
    && luarocks install luafilesystem \    
    && luarocks install process \
    && luarocks install mobdebug \
    && apk del gcc make curl wget libc-dev lua5.1-dev moreutils coreutils git \
    && luajit -v
    
ENV LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:/usr/local/lib"

WORKDIR /develop/
RUN mkdir db
EXPOSE 8080/tcp 8888/tcp
ENV HC2DOCKER=TRUE


#COPY server .
#COPY log .
#COPY cli .
#COPY images/. images/.
#COPY dtemplates/. dtemplates/. 
#COPY html/. html/.
#COPY HC2proxy.lua .
#COPY HC2_api.lua .

ENTRYPOINT ["luajit"]
